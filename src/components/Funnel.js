import {useEffect,useRef} from "react";
import {gsap} from "gsap";
import "./funnel.scss";


export default function Funnel(){
  const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--bgLight');

	const ringsRef = useRef([]);
  ringsRef.current = [];
  var rings = ringsRef.current;
  function addRingRefs(el){
    if(el && !rings.includes(el)){
      rings.push(el);
    }
  }
  useEffect(()=>{
    gsap.registerEffect({
      name: "spin",
      effect: (targets, config) => {
          return gsap.to(targets,config);
      },
      extendTimeline: true
    });
    

    gsap.effects.spin("[id^='path']",{
        ease:"power1.outIn",
        duration: 8.5,
        rotation: -360,
        repeat:0,
        transformOrigin:"center center"
    });

    


    const ringFunnel = gsap.timeline({});
    ringFunnel.set("[id^='path1015']",{
      transformOrigin:"center center",
      x: gsap.utils.distribute({
        from: "start",
        base: 0,
        amount: 180,
        ease:"power1.inOut"
      }),
      y:gsap.utils.distribute({from:"start",base:0,amount:400,ease:"power1.in"}),
      scale: gsap.utils.distribute({from:"start",base:.675,amount:1})
    })
    
    
              
  },[])
  const funnelBGcolor = getComputedStyle(document.documentElement).getPropertyValue("--bg");
	return <>
    <svg version="1.1" id="funnels"  viewBox="0 0 1920 1080" preserveAspectRatio="xMinYMax ">  
      <defs>
        <radialGradient id = "funnelBGgradient" cx = "17%" cy = "32%" r = "50%">
            <stop stopColor = "black" offset = "0%"/>
            <stop stopColor = {`${funnelBGcolor}`} offset = "100%"/>
        </radialGradient>
      </defs>
      <rect id="funnelsBG" x="0" y="0" width="100%" height="100%" fill={bgColor}/>
      <g id="funnels_group" fillOpacity="1" fillRule="evenodd" strokeWidth="1" >

        <path ref={addRingRefs} id="path1015-1-7-4" d="M299.9 175.5a167.8 169.6 0 0 0-168 170 167.8 169.6 0 0 0 168 170 167.8 169.6 0 0 0 167-170 167.8 169.6 0 0 0-167-170zm4 42a130.5 126.1 0 0 1 131 127 130.5 126.1 0 0 1-131 124 130.5 126.1 0 0 1-131-124 130.5 126.1 0 0 1 131-127z" fill="#e3e3e3"/>
        <path ref={addRingRefs} id="path1015-1-7-5-0-6-3" d="M501.9 287.5a220.8 210.2 63.2 0 0-265-154 220.8 210.2 63.2 0 0-141.04 267 220.8 210.2 63.2 0 0 267.04 157 220.8 210.2 63.2 0 0 139-270zm-49 7a141.2 160.9 71.41 0 1-66 158 141.2 160.9 71.41 0 1-220-23 141.2 160.9 71.41 0 1 44-202 141.2 160.9 71.41 0 1 220 23 141.2 160.9 71.41 0 1 22 44z" fill="#f4f4f4"/>
        <path ref={addRingRefs} id="path1015-1-7-4-9" d="M286.9 130.5a226.8 206.6 42.82 0 0-197.04 138 226.8 206.6 42.82 0 0 152.04 279 226.8 206.6 42.82 0 0 267-125 226.8 206.6 42.82 0 0-151-279 226.8 206.6 42.82 0 0-71-13zm19 59a145.3 150.7 70.3 0 1 134 133 145.3 150.7 70.3 0 1-140 158 145.3 150.7 70.3 0 1-160-133 145.3 150.7 70.3 0 1 141-158 145.3 150.7 70.3 0 1 25 0z" fill="#d0d0d0"/>
        <path ref={addRingRefs} id="path1015-1-7-4-9-3" d="M524.9 227.5a238.8 263.7 30.22 0 0-242-135.96A238.8 263.7 30.22 0 0 55.86 387.5a238.8 263.7 30.22 0 0 259.04 213 238.8 263.7 30.22 0 0 229-293 238.8 263.7 30.22 0 0-19-80zm-55 49a173.8 169.3 6.82 0 1-80 205 173.8 169.3 6.82 0 1-236-67 173.8 169.3 6.82 0 1 68-231 173.8 169.3 6.82 0 1 236 67 173.8 169.3 6.82 0 1 12 26z" fill="#ebebeb"/>
        <path ref={addRingRefs} id="path1015-1-7-4-6" d="M516.9 147.5a251.4 294.5 54.34 0 0-394 18 251.4 294.5 54.34 0 0-42.04 377 251.4 294.5 54.34 0 0 397.04-17 251.4 294.5 54.34 0 0 39-378zm-104 63a170.7 175.3 4.42 0 1 54 135 170.7 175.3 4.42 0 1-173 172 170.7 175.3 4.42 0 1-166-180 170.7 175.3 4.42 0 1 176-171 170.7 175.3 4.42 0 1 109 44z" fill="#c5c5c5"/>
        <path ref={addRingRefs} id="path1015-1-7-9-8" d="M41.86 225.5a285 322.6 24.51 0 0 124.04 414 285 322.6 24.51 0 0 394-178 285 322.6 24.51 0 0-126-409.96A285 322.6 24.51 0 0 41.86 225.5Zm52 17a208.8 196.1 24.51 0 1 272.04-91 208.8 196.1 24.51 0 1 108 265 208.8 196.1 24.51 0 1-272 92 208.8 196.1 24.51 0 1-108.04-266z" fill="#a7a7a7"/>
        <path ref={addRingRefs} id="path1015-1-7-9" d="M300.9 21.54A366.5 323.9 0 0 0-67.14 345.5a366.5 323.9 0 0 0 368.04 324 366.5 323.9 0 0 0 365-324 366.5 323.9 0 0 0-365-323.96zm8 62a222.8 237.2 0 0 1 222 237.96 222.8 237.2 0 0 1-222 238 222.8 237.2 0 0 1-224.04-238A222.8 237.2 0 0 1 308.9 83.54Z" fill="#efefef"/>
        <path ref={addRingRefs} id="path1015-1-7-4-6-8" d="M297.9-85.46A368.4 431.6 6.46 0 0-70.14 360.5a368.4 431.6 6.46 0 0 369.04 417 368.4 431.6 6.46 0 0 370-449 368.4 431.6 6.46 0 0-371-413.96zm-35 176a256.8 250.1 46.54 0 1 201 73.96 256.8 250.1 46.54 0 1 16 356 256.8 250.1 46.54 0 1-358 4 256.8 250.1 46.54 0 1-14-359 256.8 250.1 46.54 0 1 155-74.96z" fill="#cfcfcf"/>
        <path ref={addRingRefs} id="path1015" d="M340.9-58.46a395.8 415.4 47.34 0 0-136 15A395.8 415.4 47.34 0 0-97.14 458.5a395.8 415.4 47.34 0 0 492.04 276 395.8 415.4 47.34 0 0 301-502 395.8 415.4 47.34 0 0-355-290.96zm-53 154a276.6 234.4 65.53 0 1 190 112.96 276.6 234.4 65.53 0 1-15 377 276.6 234.4 65.53 0 1-343-65 276.6 234.4 65.53 0 1 15-376 276.6 234.4 65.53 0 1 153-48.96z" fill="#e1e1e1"/>
        <path ref={addRingRefs} id="path1015-1-7-8" d="M299.9-166.5a489.5 513.8 0 0 0-490 512 489.5 513.8 0 0 0 490 512 489.5 513.8 0 0 0 489-512 489.5 513.8 0 0 0-489-512zm-55 213.04a310.4 310.7 0 0 1 310 308.96 310.4 310.7 0 0 1-310 312 310.4 310.7 0 0 1-311.04-312A310.4 310.7 0 0 1 244.9 46.54Z" fill="#a4a4a4"/>
        <path ref={addRingRefs} id="path1015-1" d="M612.9-89.46a517.2 535.8 37.66 0 0-732 133A517.2 535.8 37.66 0 0-14.14 780.5a517.2 535.8 37.66 0 0 734.04-135 517.2 535.8 37.66 0 0-107-734.96zm-105 112a358.3 351.7 31.94 0 1 88 494.96 358.3 351.7 31.94 0 1-497.04 74 358.3 351.7 31.94 0 1-88-490A358.3 351.7 31.94 0 1 507.9 22.54z" fill="#d5d5d5"/>
        <path ref={addRingRefs} id="path1015-3" d="M-319.1 402.5a627.7 594.8 20.97 0 0 61 194 627.7 594.8 20.97 0 0 838 294 627.7 594.8 20.97 0 0 276-795.96A627.7 594.8 20.97 0 0 18.86-199.5a627.7 594.8 20.97 0 0-337.96 602zm246.96 32a349.9 420.9 57.86 0 1 116-309A349.9 420.9 57.86 0 1 613.9 37.54a349.9 420.9 57.86 0 1-2 518.96 349.9 420.9 57.86 0 1-568.04 86 349.9 420.9 57.86 0 1-116-208z" fill="#b9b9b9"/>
        <path ref={addRingRefs} id="path1015-1-7" d="M301.9-304.5a596.1 651.6 0 0 0-598 650 596.1 651.6 0 0 0 598 650 596.1 651.6 0 0 0 594-650 596.1 651.6 0 0 0-594-650zm-67 270.04a378 394.1 0 0 1 377 390.96 378 394.1 0 0 1-377 397 378 394.1 0 0 1-380-397 378 394.1 0 0 1 380-390.96z" fill="#939393"/>
        <path ref={addRingRefs} id="path1015-1-7-4-5" d="M299.9-354.5a690.4 697.9 0 0 0-690 702 690.4 697.9 0 0 0 690 698.5 690.4 697.9 0 0 0 689-698.5 690.4 697.9 0 0 0-689-702zm20 174a536.9 518.8 0 0 1 536 524 536.9 518.8 0 0 1-536 509 536.9 518.8 0 0 1-541-509 536.9 518.8 0 0 1 541-524z" fill="#e1e1e1"/>
        <path ref={addRingRefs} id="path1015-1-1" d="M735.9-238.5a705.2 735.5 62.87 0 0-1019 178.04 705.2 735.5 62.87 0 0 147 990.96 705.2 735.5 62.87 0 0 1020-181 705.2 735.5 62.87 0 0-148-988zm-147 151.04a496.7 474.9 10.92 0 1 123 665.96 496.7 474.9 10.92 0 1-692.04 99A496.7 474.9 10.92 0 1-102.1 18.54a496.7 474.9 10.92 0 1 691-106z" fill="#cacaca"/>
        <path ref={addRingRefs} id="path1015-1-7-0" d="M615.9-284.5a749.2 699.7 12.44 0 0-995 316.04A749.2 699.7 12.44 0 0-16.14 975.5a749.2 699.7 12.44 0 0 994.04-314 749.2 699.7 12.44 0 0-362-946zm-139 205.04a470.8 485.7 65.55 0 1 216 630.96 470.8 485.7 65.55 0 1-648.04 226 470.8 485.7 65.55 0 1-216.96-628 470.8 485.7 65.55 0 1 649-228.96z" fill="#b7b7b7"/>
        <path ref={addRingRefs} id="path1015-1-7-0-9" d="M1064 220.5a771.8 794.7 5.33 0 0-882.1-662 771.8 794.7 5.33 0 0-647 913 771.8 794.7 5.33 0 0 882 661.5A771.8 794.7 5.33 0 0 1064 220.5zm-269.1 9a506.2 528.6 71.82 0 1-449 586 506.2 528.6 71.82 0 1-593-417 506.2 528.6 71.82 0 1 445-586 506.2 528.6 71.82 0 1 597 417z" fill="#efefef"/>
        <path ref={addRingRefs} id="path1015-1-7-5-0" d="M294.9-444.5a862.6 790.6 0 0 0-860 790 862.6 790.6 0 0 0 860 790.5A862.6 790.6 0 0 0 1164 345.5a862.6 790.6 0 0 0-869.1-790zm-26 184a605.7 551.7 80.52 0 1 527 405 605.7 551.7 80.52 0 1-319 768 605.7 551.7 80.52 0 1-715-371 605.7 551.7 80.52 0 1 317.96-769 605.7 551.7 80.52 0 1 189.04-33z" fill="#cacaca"/>
        <path ref={addRingRefs} id="path1015-1-7-5-4" d="M1124 148.5a932.9 842.7 62.67 0 0-1082.14-694 932.9 842.7 62.67 0 0-565.96 1093 932.9 842.7 62.67 0 0 1080 690.5A932.9 842.7 62.67 0 0 1124 148.5Zm-202.1 17a594.9 639.6 63.63 0 1-159 593 594.9 639.6 63.63 0 1-893 48 594.9 639.6 63.63 0 1-5-849.96 594.9 639.6 63.63 0 1 893-52 594.9 639.6 63.63 0 1 164 260.96z" fill="#979797"/>
        <path ref={addRingRefs} id="path1015-1-7-5" d="M619.9-524.5a1036 920.3 5.1 0 0-1305 571.04A1036 920.3 5.1 0 0-16.14 1218 1036 920.3 5.1 0 0 1284 646.5a1036 920.3 5.1 0 0-664.1-1171Zm-108 193a660.8 698.7 9.05 0 1 453 502 660.8 698.7 9.05 0 1-498 843.5 660.8 698.7 9.05 0 1-794-505.5 660.8 698.7 9.05 0 1 496-846 660.8 698.7 9.05 0 1 343 6z" fill="#dbdbdb"/>
        <path ref={addRingRefs} id="path1015-1-7-5-0-6" d="M1299 63.54A1090 1038 63.2 0 0-9.14-702.5a1090 1038 63.2 0 0-694.96 1316 1090 1038 63.2 0 0 1312 780.5A1090 1038 63.2 0 0 1299 63.54Zm-244 32A697.2 794.7 71.41 0 1 728.9 871.5a697.2 794.7 71.41 0 1-1087-115 697.2 794.7 71.41 0 1 217-994 697.2 794.7 71.41 0 1 1087 116A697.2 794.7 71.41 0 1 1055 95.54z" fill="#ededed"/>
        <path ref={addRingRefs} id="path1015-1-7-8-8" d="M301.9-723.5a1021 1071 0 0 0-1022 1067A1021 1071 0 0 0 301.9 1415 1021 1071 0 0 0 1319 343.5a1021 1071 0 0 0-1017.1-1067Zm-115 444a647.2 647.8 0 0 1 647 644 647.2 647.8 0 0 1-647 652.5 647.2 647.8 0 0 1-650-652.5 647.2 647.8 0 0 1 650-644z" fill="#b7b7b7"/>
        <path ref={addRingRefs} id="path1015-1-7-5-2" d="M564.9-655.5a1187 1033 22.5 0 0-1234 329 1187 1033 22.5 0 0 319 1488.5A1187 1033 22.5 0 0 1269 1017 1187 1033 22.5 0 0 948.9-469.5a1187 1033 22.5 0 0-384-186zm23 203a914.3 821.9 18.18 0 1 611.1 1067A914.3 821.9 18.18 0 1 73.86 1111 914.3 821.9 18.18 0 1-537.1 43.54a914.3 821.9 18.18 0 1 1125-496.04Z" fill="#868686"/>
        <path ref={addRingRefs} id="path1015-1-7-5-2-3" d="M1367 611.5a1096 1244 24.96 0 0-360-1290 1096 1244 24.96 0 0-1580.1 349 1096 1244 24.96 0 0 170 1698.5A1096 1244 24.96 0 0 1177 1024a1096 1244 24.96 0 0 190-412.5zm-210 32A873.3 957.6 21.09 0 1 27.86 1295 873.3 957.6 21.09 0 1-515.1 109.5a873.3 957.6 21.09 0 1 1133-646 873.3 957.6 21.09 0 1 539.1 1180z" fill="#dbdbdb"/>
        <path ref={addRingRefs} id="path1015-1-7-8-6" d="M314.9-966.5a1253 1315 0 0 0-1260 1310A1253 1315 0 0 0 314.9 1658 1253 1315 0 0 0 1544 343.5a1253 1315 0 0 0-1229.1-1310Zm-160 545a794.6 795.4 0 0 1 799 791 794.6 795.4 0 0 1-799 799.5 794.6 795.4 0 0 1-790-799.5 794.6 795.4 0 0 1 790-791z" fill="#cecece"/>
        <path ref={addRingRefs} id="path1015-1-7-5-2-2" d="M1467-110.5a1271 1253 89.75 0 0-849.1-770 1271 1253 89.75 0 0-1530 899.04A1271 1253 89.75 0 0-22.14 1572 1271 1253 89.75 0 0 1507 679.5a1271 1253 89.75 0 0 40-460 1271 1253 89.75 0 0-80-330zM1167 38.54A995 895.2 39.84 0 1 707.9 1227a995 895.2 39.84 0 1-1270-583.5 995 895.2 39.84 0 1 469.96-1189A995 895.2 39.84 0 1 1167 38.54Z" fill="#f2f2f2"/>
        <path ref={addRingRefs} id="path1015-1-7-9-8-0" d="M-938.1-235.5a1366 1546 24.51 0 0 580 1984.5A1366 1546 24.51 0 0 1551 895.5 1366 1546 24.51 0 0 930.9-1068a1366 1546 24.51 0 0-1869 832.5zm240 82a1001 939.9 24.51 0 1 1300-436 1001 939.9 24.51 0 1 519.1 1269A1001 939.9 24.51 0 1-168.1 1121a1001 939.9 24.51 0 1-530-1274.5z" fill="#b7b7b7"/>
        <path ref={addRingRefs} id="path1015-1-7-5-2-2-3" d="M1523-158.5A1404 1307 89.95 0 0 632.9-1008a1404 1307 89.95 0 0-1600 991.54A1404 1307 89.95 0 0-37.14 1700 1404 1307 89.95 0 0 1563 714.5a1404 1307 89.95 0 0 40-509 1404 1307 89.95 0 0-80-364zM1203 5.54A1071 958.4 55.16 0 1 722.9 1318a1071 958.4 55.16 0 1-1320-644.5 1071 958.4 55.16 0 1 490-1313A1071 958.4 55.16 0 1 1203 5.54Z" fill="#d3d3d3"/>
      </g>
      
    </svg>
  </>
}


